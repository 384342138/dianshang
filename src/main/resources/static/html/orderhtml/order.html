<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="../../css/ordercss/order.css" rel="stylesheet">
    <link href="../../css/footer.css" rel="stylesheet">
</head>
<body>
<div class="ui-slidebar">
    <div class="dt">
        <a class="dta">
            <img src="../../images/orderimages/dog.png">
        </a>
    </div>
    <div class="dd">
        <ul>
            <li>
                <a class="la1">特色服务</a>
            </li>
            <li>
                <a class="la1">我要反馈</a>
            </li>
            <li>
                <a href="#top" class="backtop">返回</a>
            </li>

        </ul>
    </div>
</div>
<a name="top"></a>
<div id="shortcut">
    <div class="w">
        <ul class="f1">
            <li class="tbar-home">
                <i class="iconfont">
                    <img src="../../images/orderimages/home.png">
                </i>
                <a href="../top/jingdong.html">京东首页</a>
            </li>
            <li class="dorpdown">
                <div class="dor_address">
                    <i class="iconfont">
                        <img src="../../images/orderimages/address.png">
                        <span class="address_text">福建</span>
                    </i>
                </div>
            </li>
        </ul>
        <ul class="fr">
            <li class="fore1_dorpdown">
                <div class="cw-icon">
                    <a id="nickname" href="">j_nibdsfac</a>
                    <i class="iconfont">
                        <img src="../../images/orderimages/drop.png">
                    </i>
                    <i class="plus">PLUS</i>
                </div>
            </li>
            <li class="spacer"></li>
            <li class="fore2">
                <div class="dt">
                    <a href="">我的订单</a>
                </div>
            </li>
            <li class="spacer"></li>
            <li class="fore3_dorpdown">
                <div class="dt3">
                    <a>我的京东
                        <i class="iconfont">
                            <img src="../../images/orderimages/drop.png">
                        </i>
                    </a>
                </div>
            </li>
            <li class="spacer"></li>
            <li class="fore2">
                <div class="dt">
                    <a href="">京东会员</a>
                </div>
            </li>
            <li class="spacer"></li>
            <li class="fore3_dorpdown">
                <div class="dt3">
                    <a>企业采购
                        <i class="iconfont">
                            <img src="../../images/orderimages/drop.png">
                        </i></a>
                </div>
            </li>
            <li class="spacer"></li>
            <li class="fore3_dorpdown">
                <div class="dt3">
                    <a>客户服务
                        <i class="iconfont">
                            <img src="../../images/orderimages/drop.png">
                        </i>
                    </a>
                </div>
            </li>
            <li class="spacer"></li>
            <li class="fore3_dorpdown">
                <div class="dt3">
                    <a>网站导航
                        <i class="iconfont">
                            <img src="../../images/orderimages/drop.png">
                        </i></a>
                </div>
            </li>
            <li class="spacer"></li>
            <li class="fore2">
                <div class="dt">
                    <a href="">手机京东</a>
                </div>
            </li>
        </ul>
    </div>
    <div id="o-header">
        <div id="header" style="display:none"></div>
    </div>
    <div id="nav">
        <div class="w">
            <div class="logo">
                <a class="fore1">
                    <img src="../../images/orderimages/jilogo.png">
                </a>
                <a class="fore2">我的京东</a>
                <a class="fore3">返回京东首页</a>
            </div>
            <div class="navitems">
                <ul>
                    <li class="form1">
                        <a>首页</a>
                    </li>
                    <li class="form2">
                        <div class="d1">
                            <div class="dt">
                                <span class="myset">账户设置</span>
                                <span class="rdrop">
                                    <img src="../../images/orderimages/rdrop.png ">
                                </span>
                            </div>
                        </div>
                    </li>
                    <li class="form3">
                        <div class="d2">
                            <div class="dt">
                                    <span class="myset">评价</span>
                                    <span class="rdrop">
                                    <img src="../../images/orderimages/rdrop.png ">
                                    </span>
                            </div>
                        </div>
                    </li>
                    <li class="form1">
                        <a>消息</a>
                    </li>
                </ul>
            </div>
            <div class="nav-r">
                <div id="search-2019">
                    <div class="form">
                        <input class="search-t" name="searchtext" type="text">
                        <input class="search-b" name="button" type="button" value="搜索">
                    </div>
                </div>
                <div id="settleup-2019">
                    <div class="cw-icon">
                        <i class="ci-left">
                            <img src="../../images/orderimages/shopcar.png">
                        </i>
                        <a class="mycar" href="">我的购物车</a>
                        <i class="ci-count" id="shopping-amount">0</i>
                        <i class="ci-right">></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="container">
        <div class="w">
            <div id="content">
                <div id="sub">
                    <!--左侧导航-->
                    <div id="menu">
                        <div class="fore1">
                            <ul class="fore_ul">
                                <li class="li_top">订单中心</li>
                                <li class="li_ch_r">
                                    <a href="">我的订单</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">我的活动</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">评价晒单</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">我的常购商品
                                        <img src="../../images/orderimages/myjd-new-ico.png">
                                    </a>
                                </li>
                                <li class="li_ch">
                                    <a href="">代下单</a>
                                </li>
                            </ul>
                        </div>
                        <div class="fore1">
                            <ul class="fore_ul">
                                <li class="li_top">关注中心</li>
                                <li class="li_ch">
                                    <a href="">关注的商品</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">关注的店铺</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">关注的专辑</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">收藏的内容
                                        <img src="../../images/orderimages/myjd-new-ico.png">
                                    </a>
                                </li>
                                <li class="li_ch">
                                    <a href="">关注的活动</a>
                                </li>
                            </ul>
                        </div>
                        <div class="fore3">
                            <ul class="fore_ul">
                                <li class="li_top">资产中心</li>
                                <li class="li_ch">
                                    <a href="">小金库</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">京东白条</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">领货码</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">余额</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">红包</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">银行卡</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">优惠券</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">礼品卡</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">京豆</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">京东钢镚
                                        <img src="../../images/orderimages/myjd-new-ico.png">
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="fore4">
                            <ul class="fore_ul">
                                <li class="li_top">特色业务</li>
                                <li class="li_ch">
                                    <a href="">我的营业厅</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">京东通信</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">定期购</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">我的回收单</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">节能补贴</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">医药服务</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">流量加油站</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">黄金托管</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">我的课程</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">海外房产预约</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">我的海囤全球</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">装修服务</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">我的拍卖</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">我的集运</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">耗材自动递送</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">京东机票</a>
                                </li>
                            </ul>
                        </div>
                        <div class="fore5">
                            <ul class="fore_ul">
                                <li class="li_top">客户服务</li>
                                <li class="li_ch">
                                    <a href="">返修退换货</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">价格保护</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">意见建议</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">我的问答</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">购买咨询</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">交易纠纷</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">京东维修</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">我的发票</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">举报中心</a>
                                </li>
                            </ul>
                        </div>
                        <div class="fore6">
                            <ul class="fore_ul">
                                <li class="li_top">设置</li>
                                <li class="li_ch">
                                    <a href="">个人信息</a>
                                </li>
                                <li class="li_ch">
                                    <a href="">收货地址</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div id="main">
                    <div class="main_order">
                        <div class="mt">
                            <h3>我的订单</h3>
                        </div>
                    </div>
                    <div class="order_box">
                        <div class="mt">
                            <ul class="order_extra">
                                <li class="o_fore1">
                                    <a id="t1" href="?1">全部订单</a>
                                </li>
                                <li class="o_fore2">
                                    <a href="?2" id="t2">待付款</a>
                                </li>
                                <li class="o_fore2">
                                    <a href="?3" id="t3">待收货</a>
                                </li>
                                <li class="o_fore2">
                                    <a href="">待评价</a>
                                </li>
                                <li class="o_fore3">
                                    <a href="">
                                        <strong>我的常购商品</strong>
                                    </a>
                                </li>
                                <li class="o_fore3">
                                    <a href="">
                                        <strong>好货.清仓</strong>
                                    </a>
                                </li>
                                <li class="o_fore3">
                                    <a href="" class="ftx">订单回收站</a>
                                </li>
                            </ul>

                            <div class="order_extra2">
                                <div class="search_o">
                                    <input id="ip_keyword" type="text" value="商品名称/商品编号">
                                    <a class="search-btn" href="">
                                        <b>
                                            <img src="../../images/orderimages/search.png">
                                        </b>
                                    </a>
                                    <a class="high_search" href="">高级<b><img src="../../images/orderimages/dropdown.png"></b>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div id="mc">
                            <div class="order_tb">
                                <div class="thead">
                                    <ul class="thead_ul">
                                        <li class="thead_li1">近三个月订单<b>
                                            <img src="../../images/orderimages/dropdown.png">
                                        </b></li>
                                        <li class="thead_li2">订单详情</li>
                                        <li class="thead_li3">收货人</li>
                                        <li class="thead_li4">金额</li>
                                        <li id="thead_li5" @mouseenter="enter" @mouseleave="leave">{{destate}}
                                            <b>
                                                <img src="../../images/orderimages/dropdown.png">
                                            </b>
                                            <div id="state_box" >
                                                <ul>
                                                    <li><a id="tt1" href="?1">全部状态</a></li>
                                                    <li> <a id="tt2" href="?2">等待付款</a></li>
                                                    <li><a id="tt3" href="?3">等待收货</a></li>
                                                    <li><a id="tt4" href="?4">已取消</a></li>
                                                    <li><a id="tt5" href="?5">已完成</a></li>
                                                </ul>
                                            </div>
                                        </li>
                                        <li class="thead_li6">操作</li>
                                    </ul>
                                </div>
                                <div class="tb" v-for="(order,index) in orders">
                                    <div class="tb_tr">
                                        <span class="detaltime" title="2019-07-31 15:55:37">{{order.orderTime}}</span>
                                        <span class="goods_number">订单号：<a href="">{{order.orderId}}</a></span>
                                        <div class="tr_operate">
                                            <span class="order_shop">
                                                <span class="shot_text">京东</span>
                                                <a href="">
                                                    <img src="../../images/orderimages/smile.png">
                                                </a>
                                            </span>
                                            <a class="delete"  @click="deleteOrder(index)">
                                                <img  class="imgDelete" src="../../images/orderimages/delete.png">
                                            </a>
                                        </div>
                                    </div>
                                    <div class="tb_bd">
                                        <div class="td1">
                                            <div class="td11" v-for="(orderdetail,index) in order.orderDetailSet" >
                                                <div class="goods_item">
                                                    <div class="p_img">
                                                        <img src="../../images/orderimages/goodsimg.jpg">
                                                    </div>
                                                    <div class="p_msg">
                                                        <div class="p_name">
                                                            <a class="a_link" href="">{{orderdetail.product.proName}}</a>
                                                        </div>
                                                        <div class="p_extra">
                                <span class="smiller">
                                    <i>
                                        <img src="../../images/orderimages/smiller.png">
                                    </i>相似商品
                                </span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="goods_number">x{{orderdetail.proNum}}</div>
                                                <div class="goods_repair"></div>
                                            </div>
                                        </div>
                                        <div class="space"></div>
                                        <div class="td2">
                                            <div class="consignee">
                                                <div class="address">
                                                    <span style="font-weight: bolder;font-size: 14px">{{order.address.receiverName}}</span><br>
                                                    <span style="font-size: 14px">{{order.address.province}}{{order.address.city}}{{order.address.area}}{{order.address.detailAdd}}</span><br>
                                                    <span style="font-size: 14px">{{order.address.receiverPhone}}</span>
                                                </div>
                                                <span class="tet" @mouseenter="enter2(index)"  @mouseleave="leave2(index)">{{order.address.receiverName}}</span>
                                                <b @mouseenter="enter2(index)" @mouseleave="leave2(index)">
                                                    <img src="../../images/orderimages/person.png">
                                                </b>
                                            </div>
                                        </div>
                                        <div class="space"></div>
                                        <div class="td3">
                                            <div class="amount">
                                                <span>总额:￥{{order.total}}</span>
                                                <span class="ftx_10">{{order.payType}}</span>
                                            </div>
                                        </div>
                                        <div class="space"></div>
                                        <div class="td3">
                                            <div class="status">
                                                <span>{{order.orderState}}</span>
                                                <a href="">订单详情</a>
                                            </div>
                                        </div>
                                        <div class="space"></div>
                                        <div class="td4">
                                            <div class="operate">
                                                <a class="btn_again" v-if="order.orderState == '已取消'">
                                                    <b>立即购买</b>
                                                </a>
                                                <div class="btn" v-if="order.orderState == '已完成'">
                                                    <a class="btn_again">
                                                        <b>订单详情</b>
                                                    </a>
                                                    <a class="but_c">评价</a>
                                                </div>
                                                <div class="btn" v-if="order.orderState == '等待付款'">
                                                    <a class="btn_again">
                                                        <b>立即付款</b>
                                                    </a>
                                                    <a class="but_c" @click="updateOrder(index)">取消订单</a>
                                                </div>
                                                <a @click="updateOrder(index)" class="btn_again" v-if="order.orderState == '等待收货'">
                                                    <b>确定收货</b>
                                                </a>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="mt20">
                                <div class="page">
                                    <span class="prev_page" @click="prevPage()">上一页</span>
                                    <a href="" class="pagenum">1</a>
                                    <span class="next_page" @click="nextPage()">下一页</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="footer">
    <div id="service-2014">
        <div class="slogan">
            <img src="../../images/orderimages/service_items_1.png">
            <img src="../../images/orderimages/service_items_2.png">
            <img src="../../images/orderimages/service_items_3.png">
            <img src="../../images/orderimages/service_items_4.png">
        </div>
        <div class="w">
            <dl class="fore1">
                <dt>购物指南</dt>
                <dd>
                    <div><a>购物流程</a>
                    </div>
                    <div><a>会员介绍</a>
                    </div>
                    <div><a>生活旅行/团购</a>
                    </div>
                    <div><a>常见问题</a></div>
                    <div><a>大家电</a>
                    </div>
                    <div><a>联系客服</a></div>
                </dd>
            </dl>
            <dl class="fore2">
                <dt>配送方式</dt>
                <dd>
                    <div><a>上门自提</a>
                    </div>
                    <div><a>211限时达</a>
                    </div>
                    <div><a>配送服务查询</a>
                    </div>
                    <div><a>配送费收取标准</a>
                    </div>
                    <div><a>海外配送</a></div>
                </dd>
            </dl>
            <dl class="fore3">
                <dt>支付方式</dt>
                <dd>
                    <div><a>货到付款</a>
                    </div>
                    <div><a>在线支付</a>
                    </div>
                    <div><a>分期付款</a>
                    </div>
                    <div><a>邮局汇款</a>
                    </div>
                    <div><a>公司转账</a>
                    </div>
                </dd>
            </dl>
            <dl class="fore4">
                <dt>售后服务</dt>
                <dd>
                    <div><a>售后政策</a>
                    </div>
                    <div><a>价格保护</a>
                    </div>
                    <div><a>退款说明</a>
                    </div>
                    <div><a>返修/退换货</a>
                    </div>
                    <div><a>取消订单</a>
                    </div>
                </dd>
            </dl>
            <dl class="fore5">
                <dt>特色服务</dt>
                <dd>
                    <div><a >夺宝岛</a></div>
                    <div><a >DIY装机</a></div>
                    <div><a >延保服务</a></div>
                    <div><a >京东E卡</a></div>
                    <div><a >京东通信</a></div>
                    <div><a >京东JD+</a></div>
                </dd>
            </dl>
            <div id="coverage">
                <div class="dt">
                    京东自营覆盖区县
                </div>
                <div class="dd">
                    <p>京东已向全国2649个区县提供自营配送服务，支持货到付款、POS机刷卡和售后上门服务。</p>
                    <p class="ar"><a>查看详情&nbsp;&gt;</a>
                    </p>
                </div>
            </div>
            <span class="clr"></span>
        </div>
    </div>
    <div class="copyright">
        <a target="_blank" href=""><img src="../../images/orderimages/ga.png"> 京公网安备11000002000088号</a>&nbsp;&nbsp;|&nbsp;&nbsp;京ICP证070359号&nbsp;&nbsp;|&nbsp;&nbsp;
        <a target="_blank" href="">互联网药品信息服务资格证编号(京)-经营性-2014-0008</a>&nbsp;&nbsp;|&nbsp;&nbsp;新出发京零&nbsp;字第大120007号<br>互联网出版许可证编号新出网证(京)字150号&nbsp;&nbsp;|&nbsp;&nbsp;
        <a href="" target="_blank">出版物经营许可证</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="" target="_blank">网络文化经营许可证京网文[2014]2148-348号</a>&nbsp;&nbsp;|&nbsp;&nbsp;违法和不良信息举报电话：4006561155<br>Copyright&nbsp;©&nbsp;2004&nbsp;-&nbsp;2016&nbsp;&nbsp;京东JD.com&nbsp;版权所有&nbsp;&nbsp;|&nbsp;&nbsp;消费者维权热线：4006067733<br>京东旗下网站：<a href="" target="_blank">京东钱包</a>
    </div>
</div>
</body>
<script src="../../js/jquery-3.4.1.js"></script>
<script src="../../js/jquery.validate.js" type="application/javascript"></script>
<script src="../../js/jquery.validate.regex.js" type="application/javascript"></script>
<script src="../../js/vue.min.js"></script>

<script>
    var userId;
    window.onload=function () {
        document.getElementById("nickname").innerText = sessionStorage.getItem("userName");
        userId = sessionStorage.getItem("userId");
        sessionStorage.setItem("userId",userId);
        // alert(sessionStorage.getItem('userName'));
    }
    var vm = new Vue();

    //页面选择
    $(function () {

        var s = location.search.substring(1);
        if(s == "2"){
            var x=document.getElementById("t2");
            var y=document.getElementById("tt2");
            x.setAttribute("style","color:#E4393C;text-decoration: underline");
            y.setAttribute("style","color:#E4393C");
            stateOrders("待付款");

        } else if(s == "3"){
            var x=document.getElementById("t3");
            var y=document.getElementById("tt3");
            x.setAttribute("style","color:#E4393C;text-decoration: underline");
            y.setAttribute("style","color:#E4393C")
            stateOrders("待收货");

        }else if (s == "1"){
            allOrders();
        }else if(s == "4"){
            var x=document.getElementById("tt4");
            x.setAttribute("style","color:#E4393C");
            stateOrders("已取消");
        } else if(s == "5"){
            var x=document.getElementById("tt5");
            x.setAttribute("style","color:#E4393C");
            stateOrders("已完成");
        }
        else{
            allOrders();
        }

    })

    //根据订单状态查询订单
    function stateOrders(state) {
        $.ajax({
            url:"http://localhost:8080/get/user/state/order",
            type:"post",
            data:{
                "pageNum":1,
                "pageSize":4,
                'userId':userId,
                'orderState':state,
            },
            dataType:"json",
            success:function (data) {
                if(data.length != "0"){
                    var lan = data[0].pageNum;
                }
                for(var i = 0;i<data.length;i++){
                    data[i].orderTime=data[i].orderTime.substring(0,10)+" "+data[i].orderTime.substring(12,19);
                }
                var statestr;
                if(state == "待付款" || state == "待收货"){
                    statestr="等"+state;
                } else{
                    statestr=state;
                }
                vm=new Vue({
                    el:"#mc",
                    data:{
                        destate:statestr,
                        orders:data,
                    },
                    methods:{
                        deleteOrder:function (i) {
                            alert($(".order_tb .tb").eq(i).find("span[class='goods_number'] a").text());
                            $.ajax({
                                url:"http://localhost:8080/delete/user/order",
                                type:"post",
                                data:{
                                    orderId:$(".order_tb .tb").eq(i).find("span[class='goods_number'] a").text(),
                                },
                                dataType:"json",
                            })
                            vm.orders.splice(i,1);
                        },

                        updateOrder:function (i) {
                            $.ajax({
                                url:"http://localhost:8080/update/order",
                                type:"post",
                                data:{
                                    orderId:$(".order_tb .tb").eq(i).find("span[class='goods_number'] a").text(),
                                    orderState:$(".order_tb .tb").eq(i).find("div[class='status'] span").text(),
                                },
                                dataType:"json",
                            })

                        },

                        enter:function () {
                            $("#state_box").css("display","block");
                        },

                        leave:function () {
                            $("#state_box").css("display","none");
                        },

                        enter2:function (i) {
                            $(".address").eq(i).css("display","block");
                        },

                        leave2:function (i) {
                            $(".address").eq(i).css("display","none");
                        },
                        prevPage:function(){
                            if(parseInt($(".pagenum").text()) > 1){
                                $(".pagenum").text(parseInt($(".pagenum").text())-1);
                                $.ajax({
                                    url:"http://localhost:8080/get/user/state/order",
                                    type:"post",
                                    data:{
                                        "pageNum":$(".pagenum").text(),
                                        "pageSize":4,
                                        "userId":userId,
                                        'orderState':state,
                                    },
                                    dataType:"json",
                                    success:function (data) {
                                        vm.orders=data;
                                    }
                                })

                            }
                        },

                        nextPage:function () {
                            if($(".pagenum").text() < lan){
                                $(".pagenum").text(parseInt($(".pagenum").text())+1);

                                $.ajax({
                                    url:"http://localhost:8080/get/user/state/order",
                                    type:"post",
                                    data:{
                                        "pageNum":$(".pagenum").text(),
                                        "pageSize":4,
                                        "userId":userId,
                                        'orderState':state,
                                    },
                                    dataType:"json",
                                    success:function (data) {
                                        vm.orders=data;
                                    }
                                })

                            }
                        },

                    }
                })
            }
        })

    }

    //查询所有订单
    function allOrders() {
        var x=document.getElementById("t1");
        var y=document.getElementById("tt1");
        x.setAttribute("style","color:#E4393C;text-decoration: underline");
        y.setAttribute("style","color:#E4393C");
        $.ajax({
            url:"http://localhost:8080/get/user/all/order",
            type:"post",
            data:{
                "pageNum":1,
                "pageSize":4,
                "userId":userId,
            },
            dataType:"json",
            success:function (data) {
                if(data.length != "0"){
                    var lan = data[0].pageNum;
                }
                for(var i = 0;i<data.length;i++){
                    data[i].orderTime=data[i].orderTime.substring(0,10)+" "+data[i].orderTime.substring(12,19);
                }
                vm=new Vue({
                    el:"#mc",
                    data:{
                        destate:"全部状态",
                        orders:data,
                    },
                    methods:{
                        deleteOrder:function (i) {
                            $.ajax({
                                url:"http://localhost:8080/delete/user/order",
                                type:"post",
                                data:{
                                    "orderId":$(".order_tb .tb").eq(i).find("span[class='goods_number'] a").text(),
                                },
                                dataType:"json",
                            })
                            vm.orders.splice(i,1);
                        },

                        updateOrder:function (i) {
                            $.ajax({
                                url:"http://localhost:8080/update/order",
                                type:"post",
                                data:{
                                    orderId:$(".order_tb .tb").eq(i).find("span[class='goods_number'] a").text(),
                                    orderState:$(".order_tb .tb").eq(i).find("div[class='status'] span").text(),
                                },
                                dataType:"json",
                            })

                        },

                        enter:function () {
                            $("#state_box").css("display","block");
                        },
                        leave:function () {
                            $("#state_box").css("display","none");
                        },

                        enter2:function (i) {
                            $(".address").eq(i).css("display","block");
                        },
                        leave2:function (i) {
                            $(".address").eq(i).css("display","none");
                        },

                        prevPage:function(){
                            if(parseInt($(".pagenum").text()) > 1){
                                $(".pagenum").text(parseInt($(".pagenum").text())-1);

                                $.ajax({
                                    url:"http://localhost:8080/get/user/all/order",
                                    type:"post",
                                    data:{
                                        "pageNum":$(".pagenum").text(),
                                        "pageSize":4,
                                        "userId":userId,
                                    },
                                    dataType:"json",
                                    success:function (data) {
                                        vm.orders=data;
                                    }
                                })

                            }

                        },

                        nextPage:function () {
                            if(parseInt($(".pagenum").text()) < lan){
                                $(".pagenum").text(parseInt($(".pagenum").text())+1);
                                $.ajax({
                                    url:"http://localhost:8080/get/user/all/order",
                                    type:"post",
                                    data:{
                                        "pageNum":$(".pagenum").text(),
                                        "pageSize":4,
                                        "userId":userId,
                                    },
                                    dataType:"json",
                                    success:function (data) {
                                        vm.orders=data;
                                    }
                                })

                            }
                        },
                    }
                })
            }
        })

    }
</script>
</html>